<!DOCTYPE html>
<html lang="en">
<head>
    <title>Adam REST API</title>
    <script>
        function getRequest() {
            return {
                "timestamp": "2017-02-18T16:29:18.102+0000",
                "clientId": "123e4567-e89b-12d3-a456-426655440000",
                "requestId": "123e4567-e89b-12d3-a456-426655440000",
                "clientInfo": {
                    "appVersion": "1.0",
                    "device": "lge LG-H340n",
                    "deviceId": "99B2F1CA29744138225CAAF9ABE7B87052C23DAC",
                    "osType": "Android",
                    "osVersion": 6
                },
                "request": "GetMessage",
                "text": getText()
            };
        }
        function getText() {
            return document.getElementById("watsonMessage").value;
        }

        function myFunction() {
            document.getElementById("watsonMessage").innerHTML = "Paragraph changed.";
        }

        function processMessage() {
            console.log("getWatsonMessage");
            fetch('public/v1/sendMessage', {
                method: 'POST',
                body: JSON.stringify(getRequest()),
                headers: {
                    'Content-Type': 'application/json'
                }
            }).then(function(response) {
                return response.json();
            }).then(function(data) {
                presentData(data);
            });
        }

        function sendRequestShowResponse() {
            processMessage();
        }

        function presentData(data) {
            console.log(JSON.stringify(data, undefined, 2));
            document.getElementById("json").textContent = JSON.stringify(data, undefined, 2);
        }

    </script>
</head>

<body>
    <h1>ADAM REST API</h1>

    <h2>Useful links</h2>
    <ul>
        <li>Swagger API documentation <a href="swagger-ui.html">swagger-ui.html</a></li>
        <li>Base meta info <a href="system/api">system/api</a></li>
    </ul>

    <h2>Send message</h2>
<!--    <label for="watsonMessage">Ask Watson:</label>-->
    <textarea id="watsonMessage" rows="4" cols="50"></textarea>
    <p>
        <button onclick="sendRequestShowResponse();">Ask Watson</button>
    </p>
    <div>
        <pre id="json"></pre>
    </div>
</body>

</html>